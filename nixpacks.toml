[phases.setup]
nixPkgs = ["php84", "php84.packages.composer", "php84Extensions.pdo_pgsql", "php84Extensions.redis", "php84Extensions.gd", "php84Extensions.intl", "nodejs_20"]

[phases.install]
dependsOn = ["setup"]
cmds = ["composer install --no-dev --optimize-autoloader", "npm install"]

[phases.build]
dependsOn = ["install"]
cmds = ["npm run build"]

[start]
cmd = "php artisan serve --host=0.0.0.0 --port=$PORT"
